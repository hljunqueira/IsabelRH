import{c as re,A as te,r as o,D as oe,a6 as ie,j as e,a7 as M,N as ce,P as ne,Q as le,V as q,Z as de,g as y,aa as he,C as N,a as L,b as O,ab as me,d as b,k as v,t as E,v as F,w as P,x as _,y as a,B as xe,ac as ue,q as pe,_ as je,$ as ge,a0 as H,h as ve,a1 as D,I as z}from"./index-w5tiW1w6.js";import{Z as fe}from"./zap-DmtW-MJl.js";import{S as Ne}from"./save-CWk8aGAL.js";import{C as be}from"./circle-x-C8-3PkAV.js";import{C as Ce}from"./chart-column-DT20aZX5.js";import{F as we}from"./filter-BEW7zRcC.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var B="Switch",[Se,Le]=te(B),[ke,Te]=Se(B),Z=o.forwardRef((n,p)=>{const{__scopeSwitch:l,name:i,checked:j,defaultChecked:m,required:x,disabled:d,value:u="on",onCheckedChange:g,form:A,...h}=n,[C,V]=o.useState(null),S=oe(p,T=>V(T)),r=o.useRef(!1),f=C?A||!!C.closest("form"):!0,[t=!1,k]=ie({prop:j,defaultProp:m,onChange:g});return e.jsxs(ke,{scope:l,checked:t,disabled:d,children:[e.jsx(M.button,{type:"button",role:"switch","aria-checked":t,"aria-required":x,"data-state":U(t),"data-disabled":d?"":void 0,disabled:d,value:u,...h,ref:S,onClick:ce(n.onClick,T=>{k(I=>!I),f&&(r.current=T.isPropagationStopped(),r.current||T.stopPropagation())})}),f&&e.jsx(Ae,{control:C,bubbles:!r.current,name:i,value:u,checked:t,required:x,disabled:d,form:A,style:{transform:"translateX(-100%)"}})]})});Z.displayName=B;var J="SwitchThumb",Q=o.forwardRef((n,p)=>{const{__scopeSwitch:l,...i}=n,j=Te(J,l);return e.jsx(M.span,{"data-state":U(j.checked),"data-disabled":j.disabled?"":void 0,...i,ref:p})});Q.displayName=J;var Ae=n=>{const{control:p,checked:l,bubbles:i=!0,...j}=n,m=o.useRef(null),x=ne(l),d=le(p);return o.useEffect(()=>{const u=m.current,g=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(g,"checked").set;if(x!==l&&h){const C=new Event("click",{bubbles:i});h.call(u,l),u.dispatchEvent(C)}},[x,l,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l,...j,tabIndex:-1,ref:m,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function U(n){return n?"checked":"unchecked"}var X=Z,Ee=Q;const R=o.forwardRef(({className:n,...p},l)=>e.jsx(X,{className:q("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...p,ref:l,children:e.jsx(Ee,{className:q("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));R.displayName=X.displayName;function Oe(){const[,n]=de(),[p,l]=o.useState([]),[i,j]=o.useState(""),[m,x]=o.useState([]),[d,u]=o.useState([]),[g,A]=o.useState(null),[h,C]=o.useState(!1),[V,S]=o.useState(!1),[r,f]=o.useState({nome:"",tipo:"score",operador:"maior_igual",valor:"",ativo:!0}),[t,k]=o.useState({nome:"",tipo:"aprovar",condicao:"todos_filtros",ativo:!0});o.useEffect(()=>{T()},[]),o.useEffect(()=>{i&&(I(),$())},[i]);const T=async()=>{try{const c=await(await fetch("/api/vagas")).json();l(c),c.length>0&&j(c[0].id)}catch(s){console.error("Erro ao carregar vagas:",s)}},I=async()=>{try{const c=await(await fetch(`/api/vagas/${i}/triagem-config`)).json();x(c.filtros||[]),u(c.acoes||[])}catch(s){console.error("Erro ao carregar configuração:",s)}},$=async()=>{try{const c=await(await fetch(`/api/vagas/${i}/triagem-stats`)).json();A(c)}catch(s){console.error("Erro ao carregar estatísticas:",s)}},W=async()=>{S(!0);try{(await fetch(`/api/vagas/${i}/triagem-config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filtros:m,acoes:d})})).ok&&console.log("Configuração salva com sucesso")}catch(s){console.error("Erro ao salvar configuração:",s)}finally{S(!1)}},G=()=>{if(!r.nome||!r.valor)return;const s={id:Date.now().toString(),nome:r.nome,tipo:r.tipo,operador:r.operador,valor:r.valor,ativo:r.ativo};x([...m,s]),f({nome:"",tipo:"score",operador:"maior_igual",valor:"",ativo:!0})},K=s=>{x(m.filter(c=>c.id!==s))},Y=()=>{if(!t.nome)return;const s={id:Date.now().toString(),nome:t.nome,tipo:t.tipo,condicao:t.condicao,valorCondicao:t.valorCondicao,ativo:t.ativo,configuracao:t.configuracao};u([...d,s]),k({nome:"",tipo:"aprovar",condicao:"todos_filtros",ativo:!0})},ee=s=>{u(d.filter(c=>c.id!==s))},se=async()=>{try{(await fetch(`/api/vagas/${i}/triagem-toggle`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ativo:!h})})).ok&&C(!h)}catch(s){console.error("Erro ao alternar triagem:",s)}},ae=async()=>{S(!0);try{(await fetch(`/api/vagas/${i}/triagem-executar`,{method:"POST"})).ok&&$()}catch(s){console.error("Erro ao executar triagem:",s)}finally{S(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs(y,{variant:"outline",onClick:()=>n("/empresa"),className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Voltar"]}),e.jsx(fe,{className:"h-8 w-8 text-blue-500"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Triagem Automática"})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl",children:"Configure filtros inteligentes e ações automáticas para triar candidatos de forma eficiente e consistente, reduzindo o tempo de processamento."})]}),e.jsxs(N,{className:"mb-6",children:[e.jsx(L,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Selecionar Vaga"]})}),e.jsx(b,{children:e.jsxs("div",{className:"flex gap-4 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(v,{htmlFor:"vaga",children:"Vaga"}),e.jsxs(E,{value:i,onValueChange:j,children:[e.jsx(F,{children:e.jsx(P,{placeholder:"Selecione uma vaga"})}),e.jsx(_,{className:"bg-white border shadow-lg",children:p.map(s=>e.jsxs(a,{value:s.id,children:[s.titulo," - ",s.empresa]},s.id))})]})]}),e.jsxs(y,{onClick:W,disabled:V,className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Salvar"]})]})})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mb-6",children:e.jsx(b,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{checked:h,onCheckedChange:se}),e.jsx(v,{children:"Triagem Automática Ativa"})]}),e.jsx(xe,{variant:h?"default":"secondary",children:h?"Ativa":"Inativa"})]}),e.jsxs(y,{onClick:ae,disabled:V||!h,className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"Executar Triagem"]})]})})}),g&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(N,{children:e.jsx(b,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Processados"}),e.jsx("p",{className:"text-2xl font-bold",children:g.totalCandidatos})]})]})})}),e.jsx(N,{children:e.jsx(b,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Aprovados"}),e.jsx("p",{className:"text-2xl font-bold",children:g.aprovados})]})]})})}),e.jsx(N,{children:e.jsx(b,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Rejeitados"}),e.jsx("p",{className:"text-2xl font-bold",children:g.rejeitados})]})]})})}),e.jsx(N,{children:e.jsx(b,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Taxa Aprovação"}),e.jsxs("p",{className:"text-2xl font-bold",children:[g.taxaAprovacao,"%"]})]})]})})})]}),e.jsxs(je,{defaultValue:"filtros",className:"space-y-6",children:[e.jsxs(ge,{children:[e.jsxs(H,{value:"filtros",className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"Filtros"]}),e.jsxs(H,{value:"acoes",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"Ações"]})]}),e.jsx(D,{value:"filtros",children:e.jsxs(N,{children:[e.jsx(L,{children:e.jsx(O,{children:"Filtros de Triagem"})}),e.jsxs(b,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6 p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"nomeFiltro",children:"Nome"}),e.jsx(z,{id:"nomeFiltro",value:r.nome,onChange:s=>f({...r,nome:s.target.value}),placeholder:"Ex: Score mínimo"})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"tipoFiltro",children:"Tipo"}),e.jsxs(E,{value:r.tipo,onValueChange:s=>f({...r,tipo:s}),children:[e.jsx(F,{children:e.jsx(P,{})}),e.jsxs(_,{className:"bg-white border shadow-lg",children:[e.jsx(a,{value:"score",children:"Score"}),e.jsx(a,{value:"perfil_disc",children:"Perfil DISC"}),e.jsx(a,{value:"localizacao",children:"Localização"}),e.jsx(a,{value:"experiencia",children:"Experiência"}),e.jsx(a,{value:"habilidades",children:"Habilidades"}),e.jsx(a,{value:"salario",children:"Salário"})]})]})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"operadorFiltro",children:"Operador"}),e.jsxs(E,{value:r.operador,onValueChange:s=>f({...r,operador:s}),children:[e.jsx(F,{children:e.jsx(P,{})}),e.jsxs(_,{className:"bg-white border shadow-lg",children:[e.jsx(a,{value:"maior_igual",children:"≥"}),e.jsx(a,{value:"menor_igual",children:"≤"}),e.jsx(a,{value:"igual",children:"="}),e.jsx(a,{value:"contem",children:"Contém"}),e.jsx(a,{value:"nao_contem",children:"Não contém"})]})]})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"valorFiltro",children:"Valor"}),e.jsx(z,{id:"valorFiltro",value:r.valor,onChange:s=>f({...r,valor:s.target.value}),placeholder:"Ex: 80"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(y,{onClick:G,className:"w-full",children:"Adicionar"})})]}),e.jsx("div",{className:"space-y-2",children:m.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(R,{checked:s.ativo,onCheckedChange:c=>{x(m.map(w=>w.id===s.id?{...w,ativo:c}:w))}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.tipo," ",s.operador," ",s.valor]})]})]}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>K(s.id),children:"Remover"})]},s.id))})]})]})}),e.jsx(D,{value:"acoes",children:e.jsxs(N,{children:[e.jsx(L,{children:e.jsx(O,{children:"Ações Automáticas"})}),e.jsxs(b,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"nomeAcao",children:"Nome"}),e.jsx(z,{id:"nomeAcao",value:t.nome,onChange:s=>k({...t,nome:s.target.value}),placeholder:"Ex: Aprovar alto score"})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"tipoAcao",children:"Tipo"}),e.jsxs(E,{value:t.tipo,onValueChange:s=>k({...t,tipo:s}),children:[e.jsx(F,{children:e.jsx(P,{})}),e.jsxs(_,{className:"bg-white border shadow-lg",children:[e.jsx(a,{value:"aprovar",children:"Aprovar"}),e.jsx(a,{value:"rejeitar",children:"Rejeitar"}),e.jsx(a,{value:"aguardar",children:"Aguardar"}),e.jsx(a,{value:"enviar_email",children:"Enviar Email"}),e.jsx(a,{value:"marcar_interesse",children:"Marcar Interesse"})]})]})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"condicaoAcao",children:"Condição"}),e.jsxs(E,{value:t.condicao,onValueChange:s=>k({...t,condicao:s}),children:[e.jsx(F,{children:e.jsx(P,{})}),e.jsxs(_,{className:"bg-white border shadow-lg",children:[e.jsx(a,{value:"todos_filtros",children:"Todos os filtros"}),e.jsx(a,{value:"qualquer_filtro",children:"Qualquer filtro"}),e.jsx(a,{value:"score_minimo",children:"Score mínimo"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(y,{onClick:Y,className:"w-full",children:"Adicionar"})})]}),e.jsx("div",{className:"space-y-2",children:d.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(R,{checked:s.ativo,onCheckedChange:c=>{u(d.map(w=>w.id===s.id?{...w,ativo:c}:w))}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.tipo," - ",s.condicao]})]})]}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>ee(s.id),children:"Remover"})]},s.id))})]})]})})]})]})]})})}export{Oe as default};
