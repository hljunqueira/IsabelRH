import{c as f,Z as H,Y as O,u as K,r as j,j as e,g as u,aa as U,C as l,a as d,b as x,d as n,k as T,t as E,v as M,w as D,x as S,y as c,_ as G,$ as B,a0 as b,a1 as y,ac as Z}from"./index-w5tiW1w6.js";import{C as k}from"./chart-column-DT20aZX5.js";import{F as J}from"./filter-BEW7zRcC.js";import{F as Q}from"./file-text-jNBGt0Rm.js";import{D as Y}from"./download-BIIPYMVp.js";import{B as _}from"./briefcase-C_oV5mQl.js";import{T as F}from"./trending-up-D9DO2i1y.js";import{C as W}from"./calendar-D2aP9Azc.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=f("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=f("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=f("FileChartColumnIncreasing",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=f("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=f("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function xe(){const[,A]=H(),{user:i}=O(),{toast:w}=K(),[r,m]=j.useState({periodo:"30",tipoRelatorio:"geral",formato:"pdf"}),[v,g]=j.useState(!1),[s,P]=j.useState(null),[I,z]=j.useState("overview");j.useEffect(()=>{i!=null&&i.id&&R()},[i==null?void 0:i.id,r.periodo]);const R=async()=>{if(i!=null&&i.id){g(!0);try{const o=await(await fetch(`/api/relatorios/empresa/${i.id}?periodo=${r.periodo}`)).json();P(o)}catch(a){console.error("Erro ao carregar dados:",a),P(null)}finally{g(!1)}}},C=async()=>{if(!s||!(i!=null&&i.id)){w({title:"Dados insuficientes",description:"Não há dados suficientes para gerar o relatório.",variant:"destructive"});return}g(!0);try{const a=await fetch("/api/relatorios/exportar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({empresaId:i.id,tipo:r.tipoRelatorio,formato:r.formato,periodo:r.periodo})});if(a.ok){const o=await a.blob(),h=window.URL.createObjectURL(o),t=document.createElement("a");t.href=h,t.download=`relatorio-${r.tipoRelatorio}-${new Date().toISOString().split("T")[0]}.${r.formato}`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(h),document.body.removeChild(t),w({title:"Relatório exportado",description:"Download iniciado com sucesso!"})}}catch(a){console.error("Erro ao exportar:",a),w({title:"Erro na exportação",description:"Não foi possível exportar o relatório.",variant:"destructive"})}finally{g(!1)}},L=()=>{m({...r,formato:"xlsx"}),C()},q=()=>{m({...r,formato:"pdf"}),C()},$=()=>{m({...r,formato:"csv"}),C()},N=(a,o,h,t)=>e.jsx(l,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:a}),e.jsx("p",{className:"text-2xl font-bold",children:o})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t==="up",t==="down",e.jsx(ae,{className:"h-4 w-4 text-gray-500"}),h]})]})})}),p=(a,o,h)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:h}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a}),e.jsx("p",{className:"text-gray-500",children:o})]});return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs(u,{variant:"outline",onClick:()=>A("/empresa"),className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),"Voltar"]}),e.jsx(k,{className:"h-8 w-8 text-purple-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Relatórios & Dashboards"})]}),e.jsx("p",{className:"text-gray-600 max-w-3xl",children:"Visualize KPIs de recrutamento, gráficos de desempenho, relatórios mensais e exporte dados para análise."})]}),e.jsxs(l,{className:"mb-6",children:[e.jsx(d,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Filtros e Configurações"]})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"periodo",children:"Período"}),e.jsxs(E,{value:r.periodo,onValueChange:a=>m({...r,periodo:a}),children:[e.jsx(M,{children:e.jsx(D,{})}),e.jsxs(S,{className:"bg-white border shadow-lg",children:[e.jsx(c,{value:"7",children:"Últimos 7 dias"}),e.jsx(c,{value:"30",children:"Últimos 30 dias"}),e.jsx(c,{value:"90",children:"Últimos 3 meses"}),e.jsx(c,{value:"365",children:"Último ano"})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"tipoRelatorio",children:"Tipo de Relatório"}),e.jsxs(E,{value:r.tipoRelatorio,onValueChange:a=>m({...r,tipoRelatorio:a}),children:[e.jsx(M,{children:e.jsx(D,{})}),e.jsxs(S,{className:"bg-white border shadow-lg",children:[e.jsx(c,{value:"geral",children:"Relatório Geral"}),e.jsx(c,{value:"candidatos",children:"Candidatos"}),e.jsx(c,{value:"vagas",children:"Vagas"}),e.jsx(c,{value:"performance",children:"Performance"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(u,{onClick:R,disabled:v,className:"w-full",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Atualizar"]})})]})})]}),e.jsxs(G,{value:I,onValueChange:z,className:"space-y-6",children:[e.jsxs(B,{children:[e.jsx(b,{value:"overview",children:"Visão Geral"}),e.jsx(b,{value:"kpis",children:"KPIs"}),e.jsx(b,{value:"graficos",children:"Gráficos"}),e.jsx(b,{value:"exportacao",children:"Exportação"})]}),e.jsxs(y,{value:"overview",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[N("Total de Vagas",(s==null?void 0:s.totalVagas)||"0",e.jsx(_,{className:"h-5 w-5 text-blue-500"}),"neutral"),N("Candidatos Ativos",(s==null?void 0:s.candidatosAtivos)||"0",e.jsx(Z,{className:"h-5 w-5 text-green-500"}),"neutral"),N("Taxa Conversão",s!=null&&s.taxaConversao?`${s.taxaConversao}%`:"-",e.jsx(F,{className:"h-5 w-5 text-purple-500"}),"neutral"),N("Tempo Médio",(s==null?void 0:s.tempoMedio)||"-",e.jsx(W,{className:"h-5 w-5 text-orange-500"}),"neutral")]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(x,{children:"Resumo do Período"})}),e.jsx(n,{children:s?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Principais Métricas"}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("li",{children:["• Vagas publicadas: ",s.vagasPublicadas||0]}),e.jsxs("li",{children:["• Candidaturas recebidas: ",s.candidaturasRecebidas||0]}),e.jsxs("li",{children:["• Entrevistas realizadas: ",s.entrevistasRealizadas||0]}),e.jsxs("li",{children:["• Contratações efetivadas: ",s.contratacoesEfetivadas||0]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Performance"}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("li",{children:["• Média de candidatos por vaga: ",s.mediaCandidatosPorVaga||"-"]}),e.jsxs("li",{children:["• Tempo médio de processo: ",s.tempoMedioProcesso||"-"]}),e.jsxs("li",{children:["• Taxa de aprovação: ",s.taxaAprovacao?`${s.taxaAprovacao}%`:"-"]}),e.jsxs("li",{children:["• Satisfação candidatos: ",s.satisfacaoCandidatos||"-"]})]})]})]}):p("Dados insuficientes","Publique vagas e receba candidaturas para visualizar relatórios detalhados.",e.jsx(k,{className:"h-12 w-12 text-gray-400"}))})]})]}),e.jsx(y,{value:"kpis",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(x,{children:"KPIs Principais"})}),e.jsx(n,{children:s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Time to Fill"}),e.jsx("span",{className:"font-bold",children:s.timeToFill||"-"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Cost per Hire"}),e.jsx("span",{className:"font-bold",children:s.costPerHire||"-"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Quality of Hire"}),e.jsx("span",{className:"font-bold",children:s.qualityOfHire||"-"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Source Effectiveness"}),e.jsx("span",{className:"font-bold",children:s.sourceEffectiveness||"-"})]})]}):p("KPIs indisponíveis","Dados insuficientes para calcular KPIs de recrutamento.",e.jsx(X,{className:"h-12 w-12 text-gray-400"}))})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(x,{children:"Métricas Adicionais"})}),e.jsx(n,{children:s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Taxa de Retenção"}),e.jsx("span",{className:"font-bold",children:s.taxaRetencao?`${s.taxaRetencao}%`:"-"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Diversidade"}),e.jsx("span",{className:"font-bold",children:s.indiceDiversidade||"-"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"NPS Candidatos"}),e.jsx("span",{className:"font-bold",children:s.npsCandidatos||"-"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"ROI Recrutamento"}),e.jsx("span",{className:"font-bold",children:s.roiRecrutamento||"-"})]})]}):p("Métricas indisponíveis","Dados insuficientes para calcular métricas adicionais.",e.jsx(V,{className:"h-12 w-12 text-gray-400"}))})]})]})}),e.jsx(y,{value:"graficos",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(x,{children:"Funil de Recrutamento"})}),e.jsx(n,{children:s?e.jsx("div",{className:"bg-gray-100 rounded-lg h-64 flex items-center justify-center text-gray-600",children:"Gráfico do funil de recrutamento será exibido aqui"}):p("Funil indisponível","Dados insuficientes para gerar gráfico do funil.",e.jsx(k,{className:"h-12 w-12 text-gray-400"}))})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(x,{children:"Performance por Período"})}),e.jsx(n,{children:s?e.jsx("div",{className:"bg-gray-100 rounded-lg h-64 flex items-center justify-center text-gray-600",children:"Gráfico de performance temporal será exibido aqui"}):p("Performance indisponível","Dados insuficientes para gerar gráfico de performance.",e.jsx(F,{className:"h-12 w-12 text-gray-400"}))})]})]})}),e.jsx(y,{value:"exportacao",children:e.jsxs(l,{children:[e.jsx(d,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Exportação de Dados"]})}),e.jsxs(n,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(u,{onClick:q,disabled:v,className:"flex items-center gap-2",variant:"outline",children:[e.jsx(Q,{className:"h-4 w-4"}),"Exportar PDF"]}),e.jsxs(u,{onClick:L,disabled:v,className:"flex items-center gap-2",variant:"outline",children:[e.jsx(se,{className:"h-4 w-4"}),"Exportar Excel"]}),e.jsxs(u,{onClick:$,disabled:v,className:"flex items-center gap-2",variant:"outline",children:[e.jsx(Y,{className:"h-4 w-4"}),"Exportar CSV"]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Formatos Disponíveis"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"PDF:"})," Relatório formatado para impressão e apresentação"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Excel:"})," Planilha com dados para análise detalhada"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"CSV:"})," Dados brutos para importação em outras ferramentas"]})]})]})]})]})})]})]})})}export{xe as default};
