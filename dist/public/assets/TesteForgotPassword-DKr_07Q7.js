import{c as P,r as n,u as B,j as e,C as d,a as x,b as m,d as h,I,g as b,B as f,o as N,q as $}from"./index-w5tiW1w6.js";import{R as F}from"./refresh-cw-CzIvn02U.js";import{M as y}from"./mail-ByqpYR43.js";import{C as q}from"./circle-x-C8-3PkAV.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=P("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);function K(){const[l,v]=n.useState("admin@isabelrh.com.br"),[u,c]=n.useState(!1),[o,g]=n.useState([]),[i,j]=n.useState(null),{success:w,error:p,warning:T,info:A}=B(),a=(s,t="info")=>{const r=new Date().toLocaleTimeString("pt-BR");g(L=>[...L,{timestamp:r,message:s,type:t}])},k=()=>{g([]),j(null)},C=async()=>{a("üîç Testando conex√£o com backend...","info");try{const s=await fetch("/api/auth/me");return s.status===401?(a("‚úÖ Backend respondendo corretamente (401 esperado)","success"),!0):(a(`‚ö†Ô∏è Backend respondeu com status: ${s.status}`,"warning"),!0)}catch(s){return a(`‚ùå Erro ao conectar com backend: ${s}`,"error"),!1}},S=async()=>{if(!l.trim()){T("E-mail obrigat√≥rio","Por favor, digite um e-mail v√°lido");return}c(!0),a(`üìß Iniciando teste de recupera√ß√£o para: ${l}`,"info");try{if(!await C()){c(!1);return}a("üì° Enviando requisi√ß√£o POST /api/auth/forgot-password","info");const t=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})}),r=await t.json();a(`üìä Status HTTP: ${t.status}`,t.ok?"success":"error"),a(`üìÑ Resposta recebida: ${JSON.stringify(r,null,2)}`,"info"),j({status:t.status,data:r}),t.ok?(w("‚úÖ Recupera√ß√£o enviada!",r.message),r.resetToken&&(a(`üîë Token gerado: ${r.resetToken}`,"success"),a(`‚è∞ Expira em: ${new Date(r.resetExpires).toLocaleString("pt-BR")}`,"info"))):p("‚ùå Erro na recupera√ß√£o",r.message||"Erro desconhecido")}catch(s){a(`üí• Erro na requisi√ß√£o: ${s.message}`,"error"),p("Erro de conex√£o",s.message)}finally{c(!1)}},R=s=>{switch(s){case"success":return e.jsx($,{className:"h-4 w-4 text-green-600"});case"error":return e.jsx(q,{className:"h-4 w-4 text-red-600"});case"warning":return e.jsx(N,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(y,{className:"h-4 w-4 text-blue-600"})}},E=s=>{switch(s){case"success":return"text-green-700 bg-green-50";case"error":return"text-red-700 bg-red-50";case"warning":return"text-yellow-700 bg-yellow-50";default:return"text-blue-700 bg-blue-50"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-isabel-accent via-white to-isabel-accent/50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-isabel-blue mb-2",children:"üîê Teste - Recupera√ß√£o de Senha"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Sistema de Teste Integrado - Isabel Cunha RH"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(d,{children:[e.jsx(x,{children:e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"h-5 w-5 text-isabel-orange"}),e.jsx("span",{children:"Painel de Teste"})]})}),e.jsxs(h,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"üë©‚Äçüíº Usu√°rio de Teste da Isabel"}),e.jsxs("div",{className:"space-y-1 text-sm text-yellow-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"E-mail:"})," ",e.jsx("code",{children:"admin@isabelrh.com.br"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Senha atual:"})," ",e.jsx("code",{children:"123456"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo:"})," Administrador"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail para recupera√ß√£o:"}),e.jsx(I,{id:"email",type:"email",value:l,onChange:s=>v(s.target.value),placeholder:"Digite o e-mail cadastrado",className:"w-full"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(b,{onClick:S,disabled:u,className:"flex-1 bg-isabel-orange hover:bg-isabel-orange/90",children:u?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-4 w-4 mr-2 animate-spin"}),"Testando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Testar Recupera√ß√£o"]})}),e.jsx(b,{onClick:k,variant:"outline",className:"border-isabel-blue text-isabel-blue hover:bg-isabel-blue hover:text-white",children:"Limpar Logs"})]})]}),i&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"üìä √öltimo Resultado:"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:e.jsxs(f,{variant:i.status===200?"default":"destructive",children:["Status: ",i.status]})}),e.jsx("pre",{className:"text-xs text-gray-600 overflow-auto max-h-32",children:JSON.stringify(i.data,null,2)})]})]})]})]}),e.jsxs(d,{children:[e.jsx(x,{children:e.jsxs(m,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-5 w-5 text-isabel-blue"}),e.jsx("span",{children:"Logs em Tempo Real"})]}),e.jsxs(f,{variant:"outline",children:[o.length," entradas"]})]})}),e.jsx(h,{children:e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 h-96 overflow-y-auto text-sm font-mono",children:o.length===0?e.jsxs("div",{className:"text-gray-500 text-center py-8",children:["üöÄ Aguardando teste...",e.jsx("br",{}),'Clique em "Testar Recupera√ß√£o" para come√ßar']}):e.jsx("div",{className:"space-y-2",children:o.map((s,t)=>e.jsx("div",{className:`p-2 rounded text-xs ${E(s.type)}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[R(s.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("span",{className:"text-xs opacity-75",children:["[",s.timestamp,"]"]}),e.jsx("div",{className:"mt-1 break-words",children:s.message})]})]})},t))})})})]})]}),e.jsxs(d,{className:"mt-8",children:[e.jsx(x,{children:e.jsx(m,{children:"üìã Como Funciona"})}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-isabel-blue mb-2",children:"üîß Implementa√ß√£o Atual"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Verifica√ß√£o no Supabase se usu√°rio existe"}),e.jsx("li",{children:"‚Ä¢ Gera√ß√£o de token √∫nico com expira√ß√£o"}),e.jsx("li",{children:"‚Ä¢ E-mail simulado (logs no console do servidor)"}),e.jsx("li",{children:"‚Ä¢ Retorno seguro independente do resultado"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-isabel-blue mb-2",children:"üöÄ Pr√≥ximos Passos"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Migra√ß√£o para Supabase Auth nativo"}),e.jsx("li",{children:"‚Ä¢ E-mails reais com templates"}),e.jsx("li",{children:"‚Ä¢ P√°gina de redefini√ß√£o de senha"}),e.jsx("li",{children:"‚Ä¢ Rate limiting e seguran√ßa avan√ßada"})]})]})]})})]})]})})}export{K as default};
